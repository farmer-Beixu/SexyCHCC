window.__require=function t(e,n,o){function i(c,s){if(!n[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var l=n[c]={exports:{}};e[c][0].call(l.exports,function(t){return i(e[c][1][t]||t)},l,l.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"da542AFMdtI7oL5lEXx+IVW","AudioManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.AudioManager=void 0;var c=t("../config/Setting"),s=t("../events/Events"),a=t("../resource/ResourceDefine"),u=cc._decorator,l=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgm=null,e.sfx=new Map,e}var n;return i(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){n._instance=this,c.Setting.instance.on(s.Events.onBgmVolumeChanged,this.onBgmVolumeChanged,this)},e.prototype.onDestroy=function(){n._instance=null,c.Setting.instance.off(s.Events.onBgmVolumeChanged,this.onBgmVolumeChanged,this)},e.prototype.init=function(){var t=this;cc.resources.load(a.DynamicResourceDefine.audio.Bgm,cc.Prefab,function(e,n){var o=cc.instantiate(n);t.node.addChild(o),t.bgm=o.getComponent(cc.AudioSource)}),this.initSfx(a.DynamicResourceDefine.audio.SfxHit),this.initSfx(a.DynamicResourceDefine.audio.SfxShoot)},e.prototype.initSfx=function(t){var e=this;cc.resources.load(a.DynamicResourceDefine.audio.Bgm,cc.Prefab,function(n,o){var i=cc.instantiate(o);e.node.addChild(i);var r=i.getComponent(cc.AudioSource);e.sfx.set(t,r)})},e.prototype.playBgm=function(){if(this.bgm){this.bgm&&this.bgm.stop();var t=this.bgm.node;t.active=!0;var e=t.getComponent(cc.AudioSource);e.volume=c.Setting.instance.bgmVolume,this.bgm=e}},e.prototype.playSfx=function(t){if(this.sfx.has(t)){var e=this.sfx.get(t).node;e.active=!0;var n=e.getComponent(cc.AudioSource);n.volume=c.Setting.instance.sfxVolume,n.play()}},e.prototype.onBgmVolumeChanged=function(){this.bgm&&(this.bgm.volume=c.Setting.instance.bgmVolume)},n=r([l("AudioManager")],e)}(cc.Component));n.AudioManager=p,cc._RF.pop()},{"../config/Setting":"Setting","../events/Events":"Events","../resource/ResourceDefine":"ResourceDefine"}],DataUtilsCommon:[function(t,e,n){"use strict";cc._RF.push(e,"ad27eSKSM1C4pJaqqytA9Tr","DataUtilsCommon");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],c=0,s=r.length;c<s;c++,i++)o[i]=r[c];return o};Object.defineProperty(n,"__esModule",{value:!0}),n.DataUtilsCommon=void 0;var i=function(){function t(){}return t.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];cc.log.apply(cc,o(["Error"],t))},t.rad=function(t,e){var n=(e-t+1)*Math.random()+t;return Math.floor(n)},t.getPopAni=function(t,e,n,o){return void 0===o&&(o=.5),t.active=!0,t.opacity=e?0:255,cc.tween(t).to(o,{opacity:e?255:0}).call(function(){t.opacity=255,t.active=e,n&&n.run()}).start()},t.getAllIndex=function(t,e){var n=[];return t.forEach(function(t,o){t===e&&n.push(o)}),n.length<=0?-1:n},t.drawLine=function(t,e,n,o){void 0===n&&(n=2);var i=new cc.Node;i.addComponent(cc.Graphics),this.drawList.push(i),i.parent=o,i.x=t.x,i.y=t.y;var r=i.getComponent(cc.Graphics);r.lineWidth=20,r.strokeColor=cc.Color.WHITE,r.moveTo(t.x,t.y);var c=t.x,s=t.y,a=1,u=1,l=e.x-t.x,p=e.y-t.y;e.x<t.x&&(a=-1,l=t.x-e.x),e.y<t.y&&(u=-1,p=t.y-e.y);var h=l/(100*n),f=p/(100*n);e.x===t.x&&(a=0),e.y===t.y&&(u=0);var d=Math.floor(e.x),g=Math.floor(e.y),_=function(){c!=d&&(c+=h*a,r.lineTo(c,s),r.stroke(),setTimeout(function(){_()},10))},y=function(){s!=g&&(s+=f*u,r.lineTo(c,s),r.stroke(),setTimeout(function(){y()},10))};_(),y()},t.clearAllLines=function(){this.drawList.forEach(function(t){t.destroy()})},t.getGameData=function(){},t.updatenNumberAnim=function(t,e,n,o,i,r,c){void 0===r&&(r=1),void 0===c&&(c=!1),n.string=t+"",cc.tween({num:t}).to(r,{num:e},{progress:function(t,e,o,i){return n.string=Math.ceil(t+(e-t)*i)+"",t+(e-t)*i}}).call(function(){i&&i.run()}).tag(o).start()},t.drawList=[],t}();n.DataUtilsCommon=i,window.DataUtilsCommon=i,cc._RF.pop()},{}],Enum:[function(t,e,n){"use strict";cc._RF.push(e,"56a89klfzBCGLuvrEd5Ir8r","Enum"),Object.defineProperty(n,"__esModule",{value:!0}),n.S2C_MAIN_SUB=n.MSG_KEYS=n.GIFT_TYPE=n.GAME_MODE=n.GIFT_LEVEL=void 0,function(t){t[t.WHITE=1]="WHITE",t[t.GREEN=2]="GREEN",t[t.BLUE=3]="BLUE",t[t.PURPLE=4]="PURPLE",t[t.YELLOW=5]="YELLOW"}(n.GIFT_LEVEL||(n.GIFT_LEVEL={})),function(t){t.DEFAULT="DEFAULT",t.MODE_50="50",t.MODE_100="100"}(n.GAME_MODE||(n.GAME_MODE={})),function(t){t.FIFTY="50",t.HUNDRED="100"}(n.GIFT_TYPE||(n.GIFT_TYPE={})),function(t){t.Msg_Send="Msg_Send",t.Msg_S2C_MAIN="main"}(n.MSG_KEYS||(n.MSG_KEYS={})),function(t){t[t.Login=1]="Login",t[t.Save=2]="Save"}(n.S2C_MAIN_SUB||(n.S2C_MAIN_SUB={})),cc._RF.pop()},{}],EventManager:[function(t,e,n){"use strict";cc._RF.push(e,"a3a2fkdrcdJT5ehQZAfs23j","EventManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventMgr=n.EventManager=void 0;var o=function(){function t(){this._eventListeners={}}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.destroy=function(){this.instance&&(this.instance=null)},t.prototype.getEventListenersIndex=function(t,e,n){for(var o=-1,i=0;i<this._eventListeners[t].length;i++){var r=this._eventListeners[t][i];if(r.callBack==e&&(!n||r.target==n)){o=i;break}}return o},t.prototype.addEventListener=function(t,e,n){if(!t)return cc.warn("eventName is empty"+t),!1;if(null==e)return cc.log("addEventListener callBack is nil"),!1;var o={callBack:e,target:n};return null==this._eventListeners[t]?this._eventListeners[t]=[o]:-1==this.getEventListenersIndex(t,e,n)&&this._eventListeners[t].push(o),!0},t.prototype.setEventListener=function(t,e,n){if(!t)return cc.warn("eventName is empty"+t),!1;if(null==e)return cc.log("setEventListener callBack is nil"),!1;var o={callBack:e,target:n};return this._eventListeners[t]=[o],!0},t.prototype.removeEventListener=function(t,e,n){if(null!=this._eventListeners[t]){var o=this.getEventListenersIndex(t,e,n);-1!=o&&this._eventListeners[t].splice(o,1)}},t.prototype.raiseEvent=function(t,e){if(console.log("==================== raiseEvent "+t+" begin | "+JSON.stringify(e)),null!=this._eventListeners[t]){for(var n=[],o=0,i=this._eventListeners[t];o<i.length;o++){var r=i[o];n.push({callBack:r.callBack,target:r.target})}for(var c=0,s=n;c<s.length;c++)(r=s[c]).callBack.call(r.target,t,e)}console.log("==================== raiseEvent "+t+" end")},t.instance=null,t}();n.EventManager=o,n.EventMgr=o.getInstance(),cc._RF.pop()},{}],Events:[function(t,e,n){"use strict";cc._RF.push(e,"315ab77QEhFqbdFITtTVlBT","Events");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.Events=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){}return t.onDead="onDead",t.onEnemyKilled="onKilled",t.onHurt="onHurt",t.onProjectileDead="onProjectileDead",t.onExpGain="onExpGain",t.onPlayerUpgrade="onPlayerUpgrade",t.onBgmVolumeChanged="onBgmVolumeChanged",o([r("Events")],t)}());n.Events=c,cc._RF.pop()},{}],GiftItem:[function(t,e,n){"use strict";cc._RF.push(e,"e51dbjwqrtGwqMktkb+vr/U","GiftItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../CHCC/chcc"),s=t("../config/Enum"),a=cc._decorator,u=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.sprite=null,e.lab=null,e.level=s.GIFT_LEVEL.WHITE,e.type=s.GIFT_TYPE.FIFTY,e}return i(e,t),e.prototype.setType=function(t){switch(t){case"50":this.type=s.GIFT_TYPE.FIFTY;break;case"100":this.type=s.GIFT_TYPE.HUNDRED}},e.prototype.spriteChange=function(){},e.prototype.change=function(t){cc.log(t),c.CHCC.productsData[this.type][t].name,c.CHCC.productsData[this.type][t].color,cc.Color.BLACK,cc.Color.WHITE,cc.Color.GREEN,cc.Color.BLUE,cc.Color.YELLOW,cc.Color.ORANGE,this.lab.string="";var e=null;this.type==s.GIFT_TYPE.FIFTY?e=c.CHCC.goods_50.getSpriteFrame(t):this.type==s.GIFT_TYPE.HUNDRED&&(e=c.CHCC.goods_100.getSpriteFrame(t)),this.sprite.spriteFrame=e},e.prototype.cutSpriteFrame=function(t,e,n,o){for(var i=t.getOriginalSize(),r=t.getTexture(),c=Math.round(i.width/e),s=Math.round(i.height/n),a=[],u=0,l=0;l<s;l++)for(var p=0;p<c;p++){var h=new cc.SpriteFrame(r,new cc.Rect(0,0,r.width,r.height));if(h.setRect(new cc.Rect(p*e,l*n,e,n)),a.push(h),++u>=o)return a}return a},r([l(cc.Sprite)],e.prototype,"bg",void 0),r([l(cc.Sprite)],e.prototype,"sprite",void 0),r([l(cc.Label)],e.prototype,"lab",void 0),r([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../CHCC/chcc":"chcc","../config/Enum":"Enum"}],GlobalQueueManager:[function(t,e,n){"use strict";cc._RF.push(e,"41c4cAZRVVH4otcK2vdaV/x","GlobalQueueManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Handle"),i=function(){function t(){this.continueHandler=o.Handler.create(this,this.execute,null,!1),this._taskNameKey="__taskNameKey",this._taskCancelHandlerKey="__taskCancelHandlerKey",this._queue=[]}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"queueLen",{get:function(){return this._queue.length},enumerable:!1,configurable:!0}),t.prototype.pushToQueue=function(t,e,n){t[this._taskNameKey]=e,t[this._taskCancelHandlerKey]=n,this._queue.push(t)},t.prototype.getTaskByName=function(t){for(var e=0;e<this.queueLen;++e)if(this._queue[e][this._taskNameKey]===t)return this._queue[e];return null},t.prototype.removeTaskByName=function(t,e){void 0===e&&(e=!1);var n=this.queueLen;if(!(n<=0)){for(var o=this._queue,i=[],r=0;r<n;++r)if(o[r][this._taskNameKey]!==t)i.push(o[r]);else{var c=o[r][this._taskCancelHandlerKey];if(c&&c.run(),!e){for(r+=1;r<n;++r)i.push(o[r]);break}}this._queue=i}},t.prototype.removeAllTasksByName=function(t){this.removeTaskByName(t,!0)},t.prototype.getNextTaskName=function(){return this.queueLen<=0?null:this._queue[0][this._taskNameKey]},t.prototype.init=function(){this._queue=[]},t.prototype.dispose=function(){this._queue=[]},t.prototype.reset=function(){this._queue=[]},t.prototype.execute=function(){return!(this._queue.length<=0||(this._queue.shift().runWith(this.continueHandler),0))},t._instance=null,t}();n.default=i,cc._RF.pop()},{"./Handle":"Handle"}],Handle:[function(t,e,n){"use strict";cc._RF.push(e,"1af61JmQDJKc7cHNfetJUOU","Handle"),Object.defineProperty(n,"__esModule",{value:!0}),n.Handler=void 0;var o=function(){function t(t,e,n,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=!1),this.once=!1,this._id=0,this.setTo(t,e,n,o)}return t.prototype.setTo=function(e,n,o,i){return void 0===i&&(i=!1),this._id=t._gid++,this.caller=e,this.method=n,this.args=o,this.once=i,this},t.prototype.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},t.prototype.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var n=this.method.apply(this.caller,this.args);else n=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),n},t.prototype.clear=function(){return this.caller=null,this.method=null,this.args=null,this},t.prototype.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,n,o,i){return void 0===o&&(o=null),void 0===i&&(i=!0),t._pool.length?t._pool.pop().setTo(e,n,o,i):new t(e,n,o,i)},t._pool=[],t._gid=1,t}();n.Handler=o,cc._RF.pop()},{}],Loger:[function(t,e,n){"use strict";var o;cc._RF.push(e,"82a10uQQ8tMMrdgELi+GlFp","Loger"),Object.defineProperty(n,"__esModule",{value:!0}),n.Loger143000801=n.LogType143000801=void 0,function(t){t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace"}(o=n.LogType143000801||(n.LogType143000801={}));var i={1:"\u7f51\u7edc\u65e5\u5fd7",2:"\u6570\u636e\u65e5\u5fd7",4:"\u4e1a\u52a1\u65e5\u5fd7",8:"\u89c6\u56fe\u65e5\u5fd7",16:"\u914d\u7f6e\u65e5\u5fd7",32:"\u6807\u51c6\u65e5\u5fd7"},r=function(){function t(){}return t.init=function(){this.tags=o.Net|o.Model|o.Business|o.View|o.Config|o.Trace},t.setTags=function(t){void 0===t&&(t=null),t&&(this.tags=t)},t.start=function(t){void 0===t&&(t="Time"),console.time(t)},t.end=function(t){void 0===t&&(t="Time"),console.timeEnd(t)},t.table=function(t){this.isOpen(o.Trace)&&console.table(t)},t.trace=function(t,e){void 0===e&&(e="color:#000000;"),this.isOpen(o.Trace)&&(console.log||cc.log).call(null,"%c%s%s",e,this.getDateString(),t)},t.logNet=function(t,e){this.orange(o.Net,t,e)},t.logModel=function(t,e){this.violet(o.Model,t,e)},t.logBusiness=function(t,e){this.blue(o.Business,t,e)},t.logView=function(t,e){this.green(o.View,t,e)},t.logConfig=function(t,e){this.gray(o.Config,t,e)},t.orange=function(t,e,n){this.print(t,e,"color:#ee7700;",n)},t.violet=function(t,e,n){this.print(t,e,"color:Violet;",n)},t.blue=function(t,e,n){this.print(t,e,"color:#3a5fcd;",n)},t.green=function(t,e,n){this.print(t,e,"color:green;",n)},t.gray=function(t,e,n){this.print(t,e,"color:gray;",n)},t.isOpen=function(t){return 0!=(this.tags&t)},t.print=function(t,e,n,o){if(this.isOpen(t)){var r=console.log||cc.log,c=i[t];o?r.call(null,"%c%s%s%s:%s%o",n,this.getDateString(),"["+c+"]",this.stack(5),o,e):r.call(null,"%c%s%s%s:%o",n,this.getDateString(),"["+c+"]",this.stack(5),e)}},t.stack=function(t){var e=(new Error).stack.split("\n"),n=[];e.forEach(function(t){var e,o=(t=t.substring(7)).split(" ");o.length<2?n.push(o[0]):n.push(((e={})[o[0]]=o[1],e))});var o,i=[],r=[];if(t<n.length-1)for(var c in n[t])if(2==(r=c.split(".")).length)i=r.concat();else{var s=(o=n[t][c]).lastIndexOf("/"),a=o.lastIndexOf(".");if(s>-1&&a>-1){var u=o.substring(s+1,a);i.push(u)}else i.push(o)}return 1==i.length?"["+i[0]+".ts]":2==i.length?"["+i[0]+".ts->"+i[1]+"]":""},t.getDateString=function(){var t=new Date,e=t.getHours().toString(),n="";return n+=(1==e.length?"0"+e:e)+":",n+=(1==(e=t.getMinutes().toString()).length?"0"+e:e)+":",n+=(1==(e=t.getSeconds().toString()).length?"0"+e:e)+":",1==(e=t.getMilliseconds().toString()).length&&(e="00"+e),2==e.length&&(e="0"+e),"["+(n+=e)+"]"},t.tags=0,t}();n.Loger143000801=r,r.init(),cc._RF.pop()},{}],MathUtils:[function(t,e,n){"use strict";cc._RF.push(e,"0c810DQNe1FcIjsL+E6nSNI","MathUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.MathUtils=void 0;var o=function(){function t(){}return t.clamp01=function(t){return t>1?t=1:t<0&&(t=0),t},t.getRad=function(t,e){var n=(e-t+1)*Math.random()+t;return Math.floor(n)},t}();n.MathUtils=o,cc._RF.pop()},{}],Net:[function(t,e,n){"use strict";cc._RF.push(e,"efca6JZxctOXqw7IiVgIEHK","Net"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/EventManager"),i=t("../config/Enum"),r=function(){function t(){var t=this;this.app=null,this.app=new WebSocket("ws://localhost:9999/ws"),this.app.onmessage=function(e){t.onMessage(e.data)},o.EventManager.getInstance().addEventListener(i.MSG_KEYS.Msg_Send,this.send,this)}return t.prototype.send=function(t,e){console.log("222",t,e),this.app.send(JSON.stringify(e))},t.prototype.onMessage=function(t){t=JSON.parse(t),cc.log("\u63a5\u6536\u6d88\u606f",t);var e=t.key;o.EventManager.getInstance().raiseEvent(e,t)},t}();window.g_Net=new r,cc._RF.pop()},{"../common/EventManager":"EventManager","../config/Enum":"Enum"}],NodeDrag:[function(t,e,n){"use strict";cc._RF.push(e,"1a546hqQCJPCIUU4w1k8d2M","NodeDrag");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabledMove=!1,e}return i(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.click,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.drag,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.clickUp,this)},e.prototype.start=function(){},e.prototype.canMove=function(t){t?this.node.on(cc.Node.EventType.TOUCH_MOVE,this.drag,this):this.node.off(cc.Node.EventType.TOUCH_MOVE,this.drag,this)},e.prototype.click=function(t){var e=this.node.parent.convertToNodeSpaceAR(t.getLocation()),n=this.node.position;cc.log(e,n,e.sub(n))},e.prototype.drag=function(t){var e=t.getLocation(),n=this.node.parent.convertToNodeSpaceAR(e);this.node.position=n},e.prototype.clickUp=function(){},r([a(cc.Boolean)],e.prototype,"enabledMove",void 0),r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],NodePool171000201:[function(t,e,n){"use strict";cc._RF.push(e,"38ebax2A7pK94Ka813t9KNN","NodePool171000201");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NodePool171000201=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pool=new Map,e.poolObj=new Map,e}return i(e,t),Object.defineProperty(e,"Instance",{get:function(){return t.GetInstance.call(this)},enumerable:!1,configurable:!0}),e.prototype.Get=function(t,e){return this.pool[t]?(this.pool[t].size()<=0&&(cc.log("\u8282\u70b9\u6570\u4e0d\u8db3 \u8fdb\u884c\u521b\u5efa",this.poolObj[t]),this.pool[t].put(cc.instantiate(this.poolObj[t]))),cc.log("\u83b7\u53d6\u8282\u70b9"+t,this.pool[t]),this.pool[t].get()):e?(this.Set(t,e),this.pool[t].get()):void cc.log("\u672a\u5b58\u5728"+t+"\u8282\u70b9\u6c60\uff0c\u8bf7\u5148\u521b\u5efa")},e.prototype.Set=function(t,e){if(this.poolObj[t])cc.log("\u5df2\u5b58\u5728"+t+"\u8282\u70b9\u6c60");else{this.pool[t]=new cc.NodePool,this.poolObj[t]=e;var n=this.poolObj[t];this.pool[t].put(cc.instantiate(n)),cc.log("\u6210\u529f\u521b\u5efa"+t+"\u8282\u70b9\u6c60")}},e.prototype.Put=function(t,e){this.pool[t]?this.pool[t].put(e):console.log("\u672a\u5b58\u5728"+t+"\u8282\u70b9\u6c60\uff0c\u8bf7\u5148\u521b\u5efa")},e.prototype.showPools=function(){this.pool.forEach(function(t){console.log(t)})},e}(t("./Singleton171000201").Singelton);n.NodePool171000201=r,cc._RF.pop()},{"./Singleton171000201":"Singleton171000201"}],PlayerPreference:[function(t,e,n){"use strict";cc._RF.push(e,"f3a38Xq7u5H5pMw7NZcYTeR","PlayerPreference");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.PlayerPreference=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){}return t.setFloat=function(t,e){cc.sys.localStorage.setItem(t,e.toString())},t.getFloat=function(t){var e=cc.sys.localStorage.getItem(t);return Number.parseFloat(e)},o([r("PlayerPreference")],t)}());n.PlayerPreference=c,cc._RF.pop()},{}],Pools:[function(t,e){"use strict";cc._RF.push(e,"71c99FuupZAYrnGQepor3cd","Pools"),cc._RF.pop()},{}],ResourceDefine:[function(t,e,n){"use strict";cc._RF.push(e,"584deKf/w5ArZ+2GBmhjMt0","ResourceDefine"),Object.defineProperty(n,"__esModule",{value:!0}),n.DynamicResourceDefine=void 0,n.DynamicResourceDefine={directory:["effect","audio","actor","ui"],Actor:{Enemy:{Path:"actor/prefab/enemy"}},Effect:{Path:"effect/prefab/",EffExplore:"effect/prefab/EffExplore",EffDie:"effect/prefab/EffDie"},audio:{Bgm:"audio/prefab/Bgm",SfxHit:"audio/prefab/SfxHit",SfxShoot:"audio/prefab/SfxShoot"}},cc._RF.pop()},{}],ResourceManager:[function(t,e,n){"use strict";cc._RF.push(e,"fa248kvosxBr5o9jT+OC1tl","ResourceManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ResManager=n.ResourceManager=void 0;var o=function(){function t(){this.assets=new Map}return t.prototype.cacheAsset=function(t,e){e.addRef(),this.assets.set(t,e)},t.prototype.releaseAsset=function(t){this.assets.has(t)&&(this.assets.get(t).decRef(),this.assets.delete(t))},t.prototype.releaseAllAssets=function(){for(var t in this.assets.values())this.assets[t].decRef();this.assets.clear()},t}();n.ResourceManager=o,n.ResManager=new o,cc._RF.pop()},{}],Setting:[function(t,e,n){"use strict";cc._RF.push(e,"d4963rXtYVBXJF2S69IR6OU","Setting");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.Setting=void 0;var c=t("../events/Events"),s=t("../utils/MathUtils"),a=t("./PlayerPreference"),u=cc._decorator,l=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bgmVolume=1,e._sfxVolume=1,e}var n;return i(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bgmVolume",{get:function(){return this._bgmVolume},set:function(t){this._bgmVolume=s.MathUtils.clamp01(t),a.PlayerPreference.setFloat("bgmVolume",t),this.emit(c.Events.onBgmVolumeChanged,this._bgmVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sfxVolume",{get:function(){return this._sfxVolume},set:function(t){this._sfxVolume=s.MathUtils.clamp01(t),a.PlayerPreference.setFloat("sfxVolume",t)},enumerable:!1,configurable:!0}),e.prototype.load=function(){this._bgmVolume=a.PlayerPreference.getFloat("bgmVolume"),isNaN(this._bgmVolume)&&(this._bgmVolume=1),this._sfxVolume=a.PlayerPreference.getFloat("sfxVolume"),isNaN(this._sfxVolume)&&(this._sfxVolume=1)},e._instance=new n,r([l("Setting")],e)}(cc.EventTarget));n.Setting=p,cc._RF.pop()},{"../events/Events":"Events","../utils/MathUtils":"MathUtils","./PlayerPreference":"PlayerPreference"}],Singleton171000201:[function(t,e,n){"use strict";cc._RF.push(e,"6b384lmWxhGSa34PmTS95n0","Singleton171000201"),Object.defineProperty(n,"__esModule",{value:!0}),n.Singelton=void 0;var o=function(){function t(){}return t.GetInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},t._instance=null,t}();n.Singelton=o,cc._RF.pop()},{}],SkeletonExt:[function(t,e){"use strict";cc._RF.push(e,"efc74y0NGdMf5vGpazrwjdG","SkeletonExt"),cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){cc.js.mixin(sp.Skeleton.prototype,{update:function(t){if(!this.paused)if(t*=this.timeScale*sp.timeScale,this.isAnimationCached()){if(this._isAniComplete){if(0===this._animationQueue.length&&!this._headAniInfo){var e=this._frameCache;if(e&&e.isInvalid()){e.updateToFrame();var n=e.frames;this._curFrame=n[n.length-1]}return}if(this._headAniInfo||(this._headAniInfo=this._animationQueue.shift()),this._accTime+=t,this._accTime>this._headAniInfo.delay){var o=this._headAniInfo;this._headAniInfo=null,this.setAnimation(0,o.animationName,o.loop)}return}this._updateCache(t)}else this._updateRealtime(t)}})}),cc._RF.pop()},{}],SoundUtils:[function(t,e){"use strict";cc._RF.push(e,"53b40TN0lhKMa+XB1ESM+rv","SoundUtils"),cc._RF.pop()},{}],SubQueueManager171000201:[function(t,e,n){"use strict";cc._RF.push(e,"c8de6UGCCVCLIe5v3k0sRBb","SubQueueManager171000201"),Object.defineProperty(n,"__esModule",{value:!0}),n.SubQueueManager171000201=void 0;var o=t("./Handle"),i=function(){function t(){this._queue=[],this.continueHandler=o.Handler.create(this,this.execute,null,!1)}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._queue=[]},t.prototype.pushToQueue=function(t){this._queue.push(t)},t.prototype.execute=function(){return!(this._queue.length<=0||(this._queue.shift().runWith(this.continueHandler),0))},t._ins=null,t}();n.SubQueueManager171000201=i,window.SubQueueManager=this,cc._RF.pop()},{"./Handle":"Handle"}],UIBg:[function(t,e,n){"use strict";cc._RF.push(e,"8ea7cCnQV5OkrDpAmiAQ4JM","UIBg");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.UIBg=void 0;var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.changeBg=function(){},e.prototype.onDestroy=function(){},r([s],e)}(cc.Component));n.UIBg=a,cc._RF.pop()},{}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"c19f0NnkbBHH6qwXi+M4Wao","UIManager");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.UIManager=n.DialogDef=void 0;var i,r=cc._decorator,c=r.ccclass;r.property,function(t){t.UISetting="UISetting",t.UISkillUpgrade="UISkillUpgrade",t.UISettlement="UISettlement"}(i=n.DialogDef||(n.DialogDef={}));var s=function(){function t(){this.uiRoot=null,this.panels=new Map}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),t.prototype.openPanel=function(t,e){var n=this;if(void 0===e&&(e=!0),this.uiRoot||(this.uiRoot=cc.find("Canvas/UIRoot")),cc.log(this.uiRoot),this.panels.has(t)){var o=this.panels.get(t);return o.active=!0,void(e&&o.setSiblingIndex(this.uiRoot.children.length-1))}cc.resources.load("ui/prefab/"+t,cc.Prefab,function(o,i){var r=cc.instantiate(i);n.uiRoot.addChild(r),n.panels.set(t,r),e&&r.setSiblingIndex(n.uiRoot.children.length-1)})},t.prototype.closePanel=function(t,e){if(void 0===e&&(e=!1),this.panels.has(t)){var n=this.panels.get(t);n&&(e?n.removeFromParent():n.active=!1)}},t.prototype.showDialog=function(t){for(var e in i)e==t?this.openPanel(e):this.closePanel(e)},t.prototype.closeDialog=function(){for(var t in i)this.closePanel(t)},t.prototype.clearAllPanels=function(){for(var t in this.panels.values())this.panels[t].removeFromParent();this.panels=new Map,this.uiRoot=null},e=o([c("UIManager")],t)}();n.UIManager=s,cc._RF.pop()},{}],UIPresentBanner:[function(t,e,n){"use strict";cc._RF.push(e,"7a88cFz+s1H8ZKEGDSsvhlb","UIPresentBanner");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../CHCC/chcc"),s=t("../common/Handle"),a=t("../common/SubQueueManager171000201"),u=t("../config/Enum"),l=t("../presentBanner/GiftItem"),p=t("../utils/MathUtils"),h=cc._decorator,f=h.ccclass,d=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.gifts_50=null,e.gifts_100=null,e.accountName=null,e.rewardPanel=null,e.spinBtn=null,e.cancelBtn=null,e.sounds=[],e.moveSpeed=1,e.isRun=!0,e.chooseBtns=[],e.slots=[],e.giftItems_50=[],e.giftItems_100=[],e.giftsData=null,e.products=[],e.curSpeedState=1,e.radList={50:[],100:[]},e.rewardId="1008",e.resultList=[],e.resultItem=null,e.resultGiftID=null,e.soundId=null,e}return i(e,t),e.prototype.onLoad=function(){window.UIPresentBanner=this,cc.log(11111111),this.init()},e.prototype.start=function(){var t=this;this.content.children.forEach(function(e){t.slots.push(e)}),cc.log(Object.keys(c.CHCC.productsData)),this.products=Object.keys(c.CHCC.productsData)},e.prototype.init=function(){var t=this;this.rewardPanel.opacity=0,this.spinBtn.opacity=0,this.cancelBtn.opacity=0;var e=this.gifts_50.parent.parent.getChildByName("btn");e&&this.chooseBtns.push(e);var n=this.gifts_100.parent.parent.getChildByName("btn");e&&this.chooseBtns.push(n),this.gifts_50.children.forEach(function(e){var n=e.getComponent(l.default);t.giftItems_50.push(n),n.setType("50")}),this.gifts_100.children.forEach(function(e){var n=e.getComponent(l.default);t.giftItems_100.push(n),n.setType("100")})},e.prototype.initData=function(){this.moveSpeed=.5,this.curSpeedState=1,c.CHCC.gameMode=u.GAME_MODE.DEFAULT,this.isRun=!0},e.prototype.clickChooseBtn=function(t,e){c.CHCC.gameMode="50"==e?u.GAME_MODE.MODE_50:u.GAME_MODE.MODE_100,a.SubQueueManager171000201.ins.reset(),a.SubQueueManager171000201.ins.pushToQueue(s.Handler.create(this,this.bannerHide,[e])),a.SubQueueManager171000201.ins.pushToQueue(s.Handler.create(this,this.bannerShow,[e])),a.SubQueueManager171000201.ins.execute()},e.prototype.bannerHide=function(t,e){var n=this.content.getChildByName("gifts_"+("50"===t?"100":"50"));this.chooseBtns.forEach(function(t){cc.tween(t).to(.5,{opacity:0}).start()}),cc.tween(n).to(.5,{opacity:0}).call(function(){e.run()}).start()},e.prototype.bannerShow=function(t,e){cc.tween(this.spinBtn).to(.5,{opacity:255}).start(),cc.tween(this.cancelBtn).to(.5,{opacity:255}).start();var n=this.content.getChildByName("gifts_"+("50"===t?"50":"100"));cc.tween(n).to(.5,{position:cc.v3(60,0,0)}).call(function(){e.run()}).start()},e.prototype.run=function(){var t=this;if(this.isRun)switch(c.CHCC.gameMode){case u.GAME_MODE.DEFAULT:this.gifts_50.children.forEach(function(e){t.giftShow(e)}),this.gifts_100.children.forEach(function(e){t.giftShow(e)});break;case u.GAME_MODE.MODE_50:this.gifts_50.children.forEach(function(e){t.giftShow(e)});break;case u.GAME_MODE.MODE_100:this.gifts_100.children.forEach(function(e){t.giftShow(e)})}},e.prototype.giftShow=function(t){t.x+=this.moveSpeed,this.resultItem&&this.resultItem.node.x>=-2&&this.resultItem.node.x<=2&&this.showResult();var e=t.parent.width>700?t.parent.width:700;t.x>e/2+t.width/2&&(t.x=-e/2,this.giftChange(t.getComponent(l.default)))},e.prototype.getRadGiftNumberByType=function(t){var e=c.CHCC.productsData[t],n=Object.keys(e),o=n.length,i=p.MathUtils.getRad(0,o-1);for(this.radList[t].length>=5&&(this.radList[t]=[]);this.radList[t].includes(i);)i=p.MathUtils.getRad(0,o-1);return this.radList[t].push(i),n[i]},e.prototype.getFinalGiftLevel=function(){var t=Math.random();return t<.005?u.GIFT_LEVEL.PURPLE:t<.1?u.GIFT_LEVEL.BLUE:t<.3?u.GIFT_LEVEL.GREEN:u.GIFT_LEVEL.WHITE,u.GIFT_LEVEL.WHITE},e.prototype.getGiftFinalNumber=function(){var t=this.getFinalGiftLevel(),e=c.CHCC.gameMode==u.GAME_MODE.MODE_50?c.CHCC.productsData[50]:c.CHCC.productsData[100],n=[];Object.keys(e).forEach(function(o){e[o].color==t&&n.push(o)});var o=n[p.MathUtils.getRad(0,n.length-1)];return cc.log("\u5956\u54c1\u7b49\u7ea7\uff1a"+t+"\u5956\u54c1ID\uff1a"+o),o},e.prototype.testRad=function(t){for(var e={};t>0;){var n=this.getFinalGiftLevel();e[n]||(e[n]=0),e[n]+=1,t--}console.log(e)},e.prototype.giftChange=function(t){var e;e=1==this.curSpeedState?this.getRadGiftNumberByType(t.type):this.resultList.pop(),t.change(e)},e.prototype.update=function(){this.isRun&&this.run()},e.prototype.back=function(){var t=this;this.moveSpeed=1,this.curSpeedState=1,c.CHCC.gameMode=u.GAME_MODE.DEFAULT,this.isRun=!0,cc.tween(this.spinBtn).to(.5,{opacity:0}).start(),cc.tween(this.cancelBtn).to(.5,{opacity:0}).start(),this.slots.forEach(function(e,n){cc.tween(e).to(.5,{opacity:0}).call(function(){t.chooseBtns.forEach(function(t){t.opacity=255}),e.setPosition(cc.v3(0,0==n?100:-100))}).to(.5,{opacity:255}).start()}),this.giftItems_100.forEach(function(e,n){t.giftItems_50[n].node.x=e.node.x})},e.prototype.spin=function(){this.playSound(0,!0),a.SubQueueManager171000201.ins.reset(),a.SubQueueManager171000201.ins.pushToQueue(s.Handler.create(this,this.speedUp)),a.SubQueueManager171000201.ins.pushToQueue(s.Handler.create(this,this.speedFinal)),a.SubQueueManager171000201.ins.pushToQueue(s.Handler.create(this,this.speedStop)),a.SubQueueManager171000201.ins.execute()},e.prototype.getReward=function(t){this.rewardId=t},e.prototype.speedUp=function(t){var e=this;cc.tween(this.spinBtn).to(.5,{opacity:0}).start(),cc.tween(this.cancelBtn).to(.5,{opacity:0}).start(),cc.tween({num:this.moveSpeed}).to(.5,{num:20},{progress:function(t,n,o,i){return e.moveSpeed=t+(n-t)*i,t+(n-t)*i}}).call(function(){t.run()}).start()},e.prototype.speedFinal=function(t){var e=this;cc.tween({num:this.moveSpeed}).to(4,{num:6},{progress:function(t,n,o,i){return e.moveSpeed=t+(n-t)*i,t+(n-t)*i}}).call(function(){t.run()}).start()},e.prototype.speedStop=function(t){var e=this,n=c.CHCC.gameMode==u.GAME_MODE.MODE_50?this.giftItems_50:this.giftItems_100,o=c.CHCC.gameMode==u.GAME_MODE.MODE_50?u.GIFT_TYPE.FIFTY:u.GIFT_TYPE.HUNDRED;this.resultGiftID=this.getGiftFinalNumber(),this.resultList=[this.getRadGiftNumberByType(o),this.getRadGiftNumberByType(o),this.resultGiftID,this.getRadGiftNumberByType(o)],cc.log(this.resultList);var i=n.sort(function(t,e){return t.node.x-e.node.x});this.resultItem=i[3],this.curSpeedState=0,cc.tween({num:this.moveSpeed}).to(4,{num:2},{progress:function(t,n,o,i){return e.moveSpeed=t+(n-t)*i,t+(n-t)*i}}).call(function(){t.run()}).start()},e.prototype.showResult=function(){this.stopSound(),this.playSound(1,!1),this.moveSpeed=0,this.curSpeedState=1,this.isRun=!1,this.resultItem=null,this.rewardUIPop()},e.prototype.rewardUIPop=function(){cc.tween(this.rewardPanel).to(.5,{opacity:255}).start(),this.rewardPanel.getChildByName("giftBg");var t=this.rewardPanel.getChildByName("giftSp"),e=this.rewardPanel.getChildByName("giftName"),n=c.CHCC.gameMode==u.GAME_MODE.MODE_50?c.CHCC.productsData[50]:c.CHCC.productsData[100],o=c.CHCC.gameMode==u.GAME_MODE.MODE_50?c.CHCC.goods_50:c.CHCC.goods_100;t.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame(this.resultGiftID),console.log(c.CHCC.gameMode,n,o),e.getComponent(cc.Label).string=""},e.prototype.recover=function(){var t=this;cc.tween(this.rewardPanel).to(.5,{opacity:0}).start(),this.moveSpeed=1,this.curSpeedState=1,c.CHCC.gameMode=u.GAME_MODE.DEFAULT,this.isRun=!0,this.resultItem=null,this.slots.forEach(function(e,n){cc.tween(e).to(.5,{opacity:0}).call(function(){t.chooseBtns.forEach(function(t){t.opacity=255}),e.setPosition(cc.v3(0,0==n?100:-100))}).to(.5,{opacity:255}).start()}),this.giftItems_100.forEach(function(e,n){t.giftItems_50[n].node.x=e.node.x})},e.prototype.testAddPoint=function(){c.CHCC.accountMgr.addPoint(this.accountName.string,1,u.GAME_MODE.MODE_50)},e.prototype.playSound=function(t,e){this.soundId=cc.audioEngine.playEffect(this.sounds[t],e),cc.audioEngine.setVolume(this.soundId,.5)},e.prototype.stopSound=function(){cc.audioEngine.stopEffect(this.soundId)},r([d(cc.Node)],e.prototype,"content",void 0),r([d(cc.Node)],e.prototype,"gifts_50",void 0),r([d(cc.Node)],e.prototype,"gifts_100",void 0),r([d(cc.EditBox)],e.prototype,"accountName",void 0),r([d(cc.Node)],e.prototype,"rewardPanel",void 0),r([d(cc.Node)],e.prototype,"spinBtn",void 0),r([d(cc.Node)],e.prototype,"cancelBtn",void 0),r([d([cc.AudioClip])],e.prototype,"sounds",void 0),r([f],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../CHCC/chcc":"chcc","../common/Handle":"Handle","../common/SubQueueManager171000201":"SubQueueManager171000201","../config/Enum":"Enum","../presentBanner/GiftItem":"GiftItem","../utils/MathUtils":"MathUtils"}],chcc:[function(t,e,n){"use strict";cc._RF.push(e,"fc2323S7KhDF6d0H/rJLYD5","chcc"),Object.defineProperty(n,"__esModule",{value:!0}),n.CHCC=void 0;var o=t("../config/Enum"),i=function(){function t(){}return t.accountMgr=null,t.gameMode=o.GAME_MODE.DEFAULT,t.giftItemBg=null,t.goods_50=null,t.goods_100=null,t.accountData={},t.productsData={50:{1001:{name:"RedTea01",color:1},1002:{name:"Red\nTea02",color:1},1003:{name:"RedTea03",color:1},1004:{name:"RedTea04",color:1},1005:{name:"RedTea05",color:1},1006:{name:"RedTea06",color:1},1007:{name:"RedTea07",color:1},1008:{name:"RedTea08",color:1},1009:{name:"RedTea08",color:1},1010:{name:"RedTea08",color:1},1011:{name:"RedTea08",color:1},1012:{name:"RedTea08",color:1},1013:{name:"RedTea08",color:1},1014:{name:"RedTea08",color:1},1015:{name:"RedTea08",color:1}},100:{1001:{name:"RedTea01",color:1},1002:{name:"Red\nTea02",color:1},1003:{name:"RedTea03",color:1},1004:{name:"RedTea04",color:1},1005:{name:"RedTea05",color:1},1006:{name:"RedTea06",color:1},1007:{name:"RedTea07",color:1},1008:{name:"RedTea08",color:1},1009:{name:"RedTea08",color:1},1010:{name:"RedTea08",color:1},1011:{name:"RedTea08",color:1},1012:{name:"RedTea08",color:1},1013:{name:"RedTea08",color:1},1014:{name:"RedTea08",color:1},1015:{name:"RedTea08",color:1},1016:{name:"RedTea08",color:1}}},t}();n.CHCC=i,cc._RF.pop()},{"../config/Enum":"Enum"}],effect:[function(t,e){"use strict";cc._RF.push(e,"be8a8oya3pArIq3L9phUcKw","effect"),cc.Class({extends:cc.Component,properties:{sp:cc.Sprite},refresh:function(){this.sp.getMaterial(0).setProperty("sys_time",this._sin)},start:function(){this._time=0,this._sin=0},update:function(t){this._time+=.2*t,this._sin=Math.sin(this._time),this._sin>.5&&(this._sin=0,this._time=0),this.refresh()}}),cc._RF.pop()},{}],main:[function(t,e,n){"use strict";cc._RF.push(e,"589f2r+Di9DD4uUeeI2+JM7","main");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountManager=void 0;var c=t("../CHCC/chcc"),s=t("../common/EventManager"),a=t("../config/Enum"),u=cc._decorator,l=u.ccclass,p=(u.property,function(){function t(t,e){this.data={50:0,100:0},this.name=t,e?(this.data[a.GAME_MODE.MODE_50]=e[a.GAME_MODE.MODE_50],this.data[a.GAME_MODE.MODE_100]=e[a.GAME_MODE.MODE_100]):(this.data[a.GAME_MODE.MODE_50]=0,this.data[a.GAME_MODE.MODE_100]=0)}return t.prototype.addPoint=function(t,e){switch(e){case a.GAME_MODE.MODE_50:this.data[a.GAME_MODE.MODE_50]+=t;break;case a.GAME_MODE.MODE_100:this.data[a.GAME_MODE.MODE_100]+=t}},t.prototype.init=function(){},t}()),h=function(){function t(t){this.accounts=[],this.a_Data=null,this.init(t)}return t.prototype.init=function(t){this.a_Data=t,this.initAccounts(t)},t.prototype.initAccounts=function(t){var e=this;Object.keys(t).forEach(function(n){e.accounts.push(new p(n,t[n]))})},t.prototype.addAccount=function(t){var e=new p(t);return this.accounts.push(e),e},t.prototype.addPoint=function(t,e,n){var o=null;this.accounts.forEach(function(e){t==e.name&&(o=e)}),o||(o=this.addAccount(t)),o.addPoint(e,n),this.C2SUpdateData()},t.prototype.getAccount=function(t){var e=null;return this.accounts.forEach(function(n){t==n.name&&(e=n)}),e},t.prototype.C2SUpdateData=function(){var t={};this.accounts.forEach(function(e){t[e.name]=e.data}),s.EventManager.getInstance().raiseEvent(a.MSG_KEYS.Msg_Send,{key:"main",sub:"2",data:t})},t}();n.AccountManager=h;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.protocal=a.MSG_KEYS.Msg_S2C_MAIN,e}return i(e,t),e.prototype.onLoad=function(){s.EventManager.getInstance().addEventListener(this.protocal,this.recieve,this),this.loadRes()},e.prototype.start=function(){s.EventManager.getInstance().raiseEvent(a.MSG_KEYS.Msg_Send,{key:"main",sub:"1"})},e.prototype.initAccount=function(t){console.log("\u83b7\u53d6\u670d\u52a1\u5668\u7528\u6237\u6570\u636e\u6210\u529f",t),c.CHCC.accountData=t,c.CHCC.accountMgr=new h(t)},e.prototype.recieve=function(t,e){var n=e.sub,o=e.data;switch(n){case a.S2C_MAIN_SUB.Login:this.initAccount(o);break;case a.S2C_MAIN_SUB.Save:}},e.prototype.loadRes=function(){cc.resources.load("texture/giftItem/levelBG",cc.SpriteAtlas,function(t,e){t||(c.CHCC.giftItemBg=e)}),cc.resources.load("texture/giftItem/50/50_goods",cc.SpriteAtlas,function(t,e){t||(c.CHCC.goods_50=e)}),cc.resources.load("texture/giftItem/100/100_goods",cc.SpriteAtlas,function(t,e){t||(c.CHCC.goods_100=e)})},r([l],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../CHCC/chcc":"chcc","../common/EventManager":"EventManager","../config/Enum":"Enum"}],"\u591a\u70b9\u6c34\u7eb9":[function(t,e){"use strict";cc._RF.push(e,"3a4b8rV3+lAObTXutYPij7h","\u591a\u70b9\u6c34\u7eb9"),cc.Class({extends:cc.Component,properties:{sp:cc.Sprite},refreshMaterial:function(){var t=this.sp.getMaterial(0);for(var e in t.setProperty("aspect",this.aspect),t.setProperty("radius",this.radius),t.setProperty("amp",this.amp),t.setProperty("band",this.band),t.setProperty("waves",this.waves),t.setProperty("speed",this.speed),t.setProperty("u_time",this.u_time),this.progress)t.setProperty("progress"+e,this.progress[e]),t.setProperty("centres"+e,this.centres[e])},onLoad:function(){var t=this;this.sp=this.node.getComponent(cc.Sprite),this.aspect=16/9,this.radius=.25,this.amp=.2,this.band=.1,this.waves=10,this.speed=2,this.u_time=0,this.progress=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],this.centres=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],this.node.on(cc.Node.EventType.TOUCH_START,function(e){for(var n in t.progress)if(-1==t.progress[n]){var o=e.getLocation();(o=t.node.convertToNodeSpaceAR(o)).x=o.x+t.node.getContentSize().width/2,o.y=o.y+t.node.getContentSize().height/2,t.centres[n][0]=o.x/t.node.getContentSize().width,t.centres[n][1]=1-o.y/t.node.getContentSize().height,t.progress[n]=0;break}})},start:function(){},update:function(t){for(var e in this.u_time+=1*t,this.progress)this.progress[e]>=0&&(this.progress[e]+=t/2,this.progress[e]>=1&&(this.progress[e]=-1));this.refreshMaterial()}}),cc._RF.pop()},{}],"\u6a21\u7cca":[function(t,e){"use strict";cc._RF.push(e,"b31deSuEw9P06oV6zMYfKwN","\u6a21\u7cca"),cc.Class({extends:cc.Component,properties:{sp:cc.Sprite},refreshMaterial:function(){var t=this.sp.getMaterial(0);t.setProperty("widthStep",this.sp.node.getContentSize().width),t.setProperty("heightStep",this.sp.node.getContentSize().height),t.setProperty("strength",-1)},onLoad:function(){this.sp=this.node.getComponent(cc.Sprite)},start:function(){},update:function(){this.refreshMaterial()}}),cc._RF.pop()},{}]},{},["Net","chcc","AudioManager","DataUtilsCommon","EventManager","GlobalQueueManager","Handle","Loger","NodeDrag","NodePool171000201","Singleton171000201","SkeletonExt","SubQueueManager171000201","Enum","PlayerPreference","Setting","Events","main","GiftItem","ResourceDefine","ResourceManager","effect","\u591a\u70b9\u6c34\u7eb9","\u6a21\u7cca","UIBg","UIManager","UIPresentBanner","MathUtils","Pools","SoundUtils"]);